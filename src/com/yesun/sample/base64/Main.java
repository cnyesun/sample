package com.yesun.sample.base64;

import java.awt.image.BufferedImage;
import java.io.ByteArrayInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.nio.charset.Charset;

import javax.imageio.ImageIO;

import org.apache.commons.io.IOUtils;

import com.sun.image.codec.jpeg.JPEGCodec;
import com.sun.image.codec.jpeg.JPEGImageEncoder;

import sun.misc.BASE64Decoder;
import sun.misc.BASE64Encoder;

public class Main {

	public static void main(String[] args) {

		String base64 = "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";

		
		System.out.println(base64.hashCode());
		
		BASE64Decoder decoder = new BASE64Decoder();
//		BASE64Encoder encoder = new BASE64Encoder();
		try {
//			byte[] buffer = IOUtils.toByteArray(new FileInputStream("c:\\下载.jpg"));
//			System.out.println(encoder.encode(buffer));
			
			
			
			byte[] buffer = decoder.decodeBuffer(base64);
			
			
//			BufferedImage src = ImageIO.read(new File("c:\\test.bmp"));
//			int width = src.getWidth(null);
//			int height = src.getHeight(null);
//
//			
//			BufferedImage outImg = new BufferedImage(width, height,src.getType());
//			outImg.getGraphics().drawImage(src, 0, 0, width, height, null);
//			FileOutputStream out = new FileOutputStream("c:\\convert.png");
//			JPEGImageEncoder encoder = JPEGCodec.createJPEGEncoder(out);
//			encoder.encode(outImg);
//			out.close();
			
			
			
			
			//image/jpeg to png
			FileOutputStream fos = new FileOutputStream("c:\\test.bmp");
			System.out.println(buffer.length);
			fos.write(buffer);
			fos.flush();
			fos.close();

		} catch (IOException e) {
			e.printStackTrace();
		}

	}

	public static void convert(String source, String formatName, String result) {
		try {
			File f = new File(source);
			f.canRead();
			BufferedImage src = ImageIO.read(f);
			ImageIO.write(src, formatName, new File(result));
		} catch (Exception e) {
			e.printStackTrace();
		}
	}

}
